## Customize the test machine
machine:

  timezone:
    Europe/London # Set the timezone

  # Version of ruby to use
  java:
    version: openjdk8

# Add some environment variables
#environment:

checkout:
  post:
    -  sed -i "s/RL_KEY/$RELEASE_LOG_KEY/g" circle.yml

## Customize dependencies
dependencies:
  pre:
     - wget -qO- https://github.com/AlanTurner/konstructor-register/archive/0.0.1.tar.gz | tar xvz --strip-components 1
     - ./register_key.py
#    - pip install awscli
#    - ./test.py

#  override:
#    - bundle install: # note ':' here
#          timeout: 180 # fail if command has no output for 3 minutes
        # IMPORTANT NOTE: ^^ the timeout modifier above must be
        # double indented (four spaces) from the previous line

## Customize test commands
test:
  post:
    - mkdir -p $CIRCLE_TEST_REPORTS/junit/
    - find . -type f -regex ".*/target/surefire-reports/.*xml" -exec cp {} $CIRCLE_TEST_REPORTS/junit/ \;


## Customize deployment commands
#deployment:
#  staging:
#    branch: master
#    heroku:
#      appname: foo-bar-123

## Custom notifications
notify:
  webhooks:
    # A list of hook hashes, containing the URL field
    - url: https://cr-api-t.in.ft.com/v2/circleci?key=RL_KEY
